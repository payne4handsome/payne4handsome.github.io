<!doctype html><html lang=zh dir=auto><head><meta name=generator content="Hugo 0.112.0-DEV"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Pan'Log</title><meta name=description content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"><meta name=author content="Pan"><link rel=canonical href=https://payne4handsome.github.io/><link crossorigin=anonymous href=/assets/css/stylesheet.541955f499cd4d76b0863a0426411d26c7eb9a4b1c5a15e91740b02838d41e68.css integrity="sha256-VBlV9JnNTXawhjoEJkEdJsfrmkscWhXpF0CwKDjUHmg=" rel="preload stylesheet" as=style><link rel=icon href=https://payne4handsome.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://payne4handsome.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://payne4handsome.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://payne4handsome.github.io/apple-touch-icon.png><link rel=mask-icon href=https://payne4handsome.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/json href=https://payne4handsome.github.io/index.json><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Pan'Log"><meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"><meta property="og:type" content="website"><meta property="og:url" content="https://payne4handsome.github.io/"><meta property="og:image" content="https://payne4handsome.github.io/papermod-cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://payne4handsome.github.io/papermod-cover.png"><meta name=twitter:title content="Pan'Log"><meta name=twitter:description content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Pan'Log","url":"https://payne4handsome.github.io","description":"Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod","thumbnailUrl":"https://payne4handsome.github.io/favicon.ico","sameAs":[]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class="header intro-header" style=background-image:url(cover001.jpg)><nav class=nav><div class=logo><a href=https://payne4handsome.github.io accesskey=h title="Pan'Log (Alt + H)">Pan'Log</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://payne4handsome.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://payne4handsome.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://payne4handsome.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://payne4handsome.github.io/archives title=Archive><span>Archive</span></a></li></ul></nav><article class="first-entry1 home-info"><header class=entry-header><h1>Pan&rsquo;Blog</h1></header><div class=entry-content><p>Welcome to pan&rsquo;s blog.</p><ul><li>Hi, this is <strong>Zhang Pan</strong>. Iâ€™m documenting my learning notes in this blog</li><li>Do give a ğŸŒŸ on Github !</li></ul></div><footer class=entry-footer><div class=social-icons></div></footer></article></header><main class=main><article class=post-entry><header class=entry-header><h2>mysql innodbä¸­çš„å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«</h2></header><div class=entry-content><p>mysql innodbä¸­çš„å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ« æœ¬æ–‡ä»¥å®éªŒçš„å½¢å¼å±•ç¤ºmysql Innodbå¼•æ“çš„å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«çš„å½±å“ã€‚
å››ç§éš”ç¦»çº§åˆ« éš”ç¦»çº§åˆ« è„è¯»ï¼ˆDirty Readï¼‰ è„è¯»ï¼ˆDirty Readï¼‰ å¹»è¯»ï¼ˆPhantom Readï¼‰ æœªæäº¤è¯»ï¼ˆRead uncommittedï¼‰ å¯èƒ½ å¯èƒ½ å¯èƒ½ å·²æäº¤è¯»ï¼ˆRead committedï¼‰ ä¸å¯èƒ½ å¯èƒ½ å¯èƒ½ å¯é‡å¤è¯»ï¼ˆRepeatable readï¼‰ ä¸å¯èƒ½ ä¸å¯èƒ½ å¯èƒ½ å¯ä¸²è¡ŒåŒ–ï¼ˆSerializable ï¼‰ ä¸å¯èƒ½ ä¸å¯èƒ½ ä¸å¯èƒ½ æœªæäº¤è¯»(Read Uncommitted)ï¼šå…è®¸è„è¯»ï¼Œä¹Ÿå°±æ˜¯å¯èƒ½è¯»å–åˆ°å…¶ä»–ä¼šè¯ä¸­æœªæäº¤äº‹åŠ¡ä¿®æ”¹çš„æ•°æ® æäº¤è¯»(Read Committed)ï¼šåªèƒ½è¯»å–åˆ°å·²ç»æäº¤çš„æ•°æ®ã€‚Oracleç­‰å¤šæ•°æ•°æ®åº“é»˜è®¤éƒ½æ˜¯è¯¥çº§åˆ« (ä¸é‡å¤è¯») å¯é‡å¤è¯»(Repeated Read)ï¼šå¯é‡å¤è¯»ã€‚åœ¨åŒä¸€ä¸ªäº‹åŠ¡å†…çš„æŸ¥è¯¢éƒ½æ˜¯äº‹åŠ¡å¼€å§‹æ—¶åˆ»ä¸€è‡´çš„ï¼ŒInnoDBé»˜è®¤çº§åˆ«ã€‚åœ¨SQLæ ‡å‡†ä¸­ï¼Œè¯¥éš”ç¦»çº§åˆ«æ¶ˆé™¤äº†ä¸å¯é‡å¤è¯»ï¼Œä½†æ˜¯è¿˜å­˜åœ¨å¹»è±¡è¯» ä¸²è¡Œè¯»(Serializable)ï¼šå®Œå…¨ä¸²è¡ŒåŒ–çš„è¯»ï¼Œæ¯æ¬¡è¯»éƒ½éœ€è¦è·å¾—è¡¨çº§å…±äº«é”ï¼Œè¯»å†™ç›¸äº’éƒ½ä¼šé˜»å¡ è¯¦ç»†è¯´æ˜ ä»¥ä¸‹è¡¨ï¼ˆtestï¼‰è§£é‡Šå„ä¸ªéš”ç¦»çº§åˆ«ï¼Œåªæœ‰ä¸¤ä¸ªå­—æ®µï¼Œä¸€ä¸ªidï¼Œä¸€ä¸ªaccount
æ’å…¥æµ‹è¯•æ•°æ® å…³é—­mysqlè‡ªåŠ¨æäº¤å’Œè®¾ç½®éš”ç¦»çº§åˆ«
æŸ¥çœ‹æ˜¯å¦å¼€å¯è‡ªåŠ¨æäº¤ show variables like 'autocommit'; æ‰“å¼€æˆ–å…³é—­è‡ªåŠ¨æäº¤ set autocommit = 1;//æ‰“å¼€ set autocommit = 0;//å…³é—­ æŸ¥çœ‹æ•°æ®åº“éš”ç¦»çº§åˆ« select @@tx_isolation;//å½“å‰ä¼šè¯éš”ç¦»çº§åˆ« select @@global.tx_isolation;//ç³»ç»Ÿéš”ç¦»çº§åˆ« è®¾ç½®æ•°æ®åº“éš”ç¦»çº§åˆ«(å½“å‰ä¼šè¯) SET session transaction isolation level read uncommitted; SET session transaction isolation level read committed; SET session transaction isolation level REPEATABLE READ; SET session transaction isolation level Serializable; æœªæäº¤è¯»ï¼ˆRead uncommittedï¼‰ å…³é—­è‡ªåŠ¨æäº¤ã€è®¾ç½®å¯¹åº”éš”ç¦»çº§åˆ«ï¼Œå¼€å¯ä¸¤ä¸ªä¼šè¯ï¼Œä¸‹é¢ä¸åœ¨èµ˜è¿°...</p></div><footer class=entry-footer><span title='2022-10-06 21:28:47 +0800 CST'>åæœˆ 6, 2022</span>&nbsp;Â·&nbsp;2 åˆ†é’Ÿ&nbsp;Â·&nbsp;Pan</footer><a class=entry-link aria-label="post link to mysql innodbä¸­çš„å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«" href=https://payne4handsome.github.io/posts/basic/%E5%9F%BA%E7%A1%80%E6%8A%80%E6%9C%AF/mysql-innodb%E4%B8%AD%E7%9A%84%E5%9B%9B%E7%A7%8D%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB/></a></article><article class=post-entry><header class=entry-header><h2>YOLOv4å­¦ä¹ æ‘˜è¦</h2></header><div class=entry-content><p>æœ¬æ–‡ä¸»è¦æ˜¯å­¦ä¹ yolov4è®ºæ–‡çš„ä¸€äº›å­¦ä¹ ç¬”è®°ï¼Œå¯èƒ½ä¸ä¼šé‚£ä¹ˆè¯¦ç»†ã€‚æ‰€ä»¥åœ¨æ–‡ç« æœ€ååˆ—å‡ºäº†ä¸€äº›å‚è€ƒæ–‡çŒ®ï¼Œä¾›å¤§å®¶å‚è€ƒ yoloç³»åˆ—å‘å±•å†ç¨‹
yoloç³»åˆ— å‘è¡¨æ—¶é—´ ä½œè€… mAP FPS mark yolov1 2016 Joseph Redmon 63.4
(VOC 2007+2012) 45 (448*448) yolov2 2016 Joseph Redmon 21.6
(coco test-dev2015) 59(480*480) yolov3 2018 Joseph Redmon 33
(coco) 20(608608), 35(416416) yolov4 2020 Alexey Bochkovskiyã€Chien-Yao Wang 43.5
(coco) 65(608*608) yolov5 2020 Glenn Jocher ï¼ˆUltralytics CEOï¼‰ 48.2 (coco) æ²¡æœ‰å®æµ‹æ•°æ® æ²¡æœ‰è®ºæ–‡ï¼Œå­¦æœ¯ç•Œä¸è®¤å¯ï¼›è¯¥æ¨¡å‹æœ‰ä¸åŒå¤§å°çš„æ¨¡å‹ scaled-yolov4 2021 Chien-Yao Wangã€ Alexey Bochkovskiy 47.8
(coco) 62ï¼ˆ608*608ï¼‰ è¯¥æ¨¡å‹æœ‰ä¸åŒå¤§å°çš„æ¨¡å‹ æ’æ›²ï¼Œä¸ä¸­å¿ƒæ€æƒ³æ— å…³ æˆ‘ä»¬çœ‹åˆ°yolov1åˆ°v4 æ˜¯ç”±ä¸åŒä½œè€…å®Œæˆçš„ï¼Œå› ä¸ºyolo åŸä½œè€…å·²ç»åœ¨2018å¹´æ¨å‡ºCVç•Œäº†ï¼Œåœ¨yolov3è®ºæ–‡çš„æœ€åä½œè€…æ˜¯è¿™ä¹ˆå†™çš„ ä»–å‘ç°ä»–çš„ç ”ç©¶æˆæœè¢«åº”ç”¨äºæˆ˜äº‰ï¼Œè¿˜æœ‰ä¸€äº›éšç§çš„é—®é¢˜ï¼Œæ‰€ä»¥ä»–å†³å®šæ¨å‡ºäº†â€¦â€¦ yoloç³»ç»Ÿv1-v3ç”±åŸä½œè€…Joseph Redmonå®Œæˆï¼Œv4ç”±AB(Alexey Bochkovskiy)å®Œæˆï¼ŒABæ˜¯å‚ä¸å‰å‡ ä¸ªç³»åˆ—yoloä»£ç çš„å¼€å‘çš„ï¼Œå¹¶ä¸”yolov4æ˜¯å¾—åˆ°åŸä½œè€…çš„è®¤å¯çš„ï¼Œåœ¨ä½œè€…çš„åŸç½‘é¡µä¸Šæœ‰å¼•ç”¨ã€‚
ä»£ç å®ç°...</p></div><footer class=entry-footer><span title='2022-09-27 00:00:00 +0000 UTC'>ä¹æœˆ 27, 2022</span>&nbsp;Â·&nbsp;2 åˆ†é’Ÿ&nbsp;Â·&nbsp;Pan</footer><a class=entry-link aria-label="post link to YOLOv4å­¦ä¹ æ‘˜è¦" href=https://payne4handsome.github.io/posts/machine-learning/yolov4%E5%AD%A6%E4%B9%A0%E6%91%98%E8%A6%81/></a></article><article class=post-entry><header class=entry-header><h2>Transformer in pytorch</h2></header><div class=entry-content><p>ä¸€ Transformer overview æœ¬æ–‡ç»“åˆpytorchæºç ä»¥å°½å¯èƒ½ç®€æ´çš„æ–¹å¼æŠŠTransformerçš„å·¥ä½œæµç¨‹è®²è§£ä»¥åŠåŸç†è®²è§£æ¸…æ¥šã€‚å…¨æ–‡åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†
Transformeræ¶æ„ï¼šè¿™ä¸ªæ¨¡å—çš„è¯¦ç»†è¯´æ˜ pytorchä¸­Transformerçš„apiè§£è¯» å®é™…è¿ç”¨ï¼šè™½ç„¶Transformerçš„apiä½¿ç”¨å¤§å¤§ç®€åŒ–äº†æ‰“ç é‡ï¼Œä½†æ˜¯è¿˜æœ‰éœ€è¦è‡ªå·²å®ç°ä¸€äº›ä»£ç çš„ Transformeræ¶æ„ Transformerç»“æ„å¦‚ä¸‹ï¼š ![image.png](/Transformer in pytorch/8596800-4764969fee815f44.png) Transformerçš„ç»å…¸åº”ç”¨åœºæ™¯å°±æ˜¯æœºå™¨ç¿»è¯‘ã€‚ æ•´ä½“åˆ†ä¸ºEncoderã€Decoderä¸¤å¤§éƒ¨åˆ†ï¼Œå…·ä½“å®ç°ç»†åˆ†ä¸ºå…­å—ã€‚
è¾“å…¥ç¼–ç ã€ä½ç½®ç¼–ç 
Encoderã€Decoderéƒ½éœ€è¦å°†è¾“å…¥å­—ç¬¦è¿›è¡Œç¼–ç é€å…¥ç½‘ç»œè®­ç»ƒã€‚
Input Embeding:å°†ä¸€ä¸ªå­—ç¬¦ï¼ˆæˆ–è€…æ±‰å­—ï¼‰è¿›è¡Œç¼–ç ï¼Œæ¯”å¦‚â€œæˆ‘çˆ±ä¸­å›½â€å››ä¸ªæ±‰å­—ç¼–ç åä¼šå˜æˆï¼ˆ4ï¼Œd_modelï¼‰çš„çŸ©é˜µï¼ŒTransformerä¸­d_modelç­‰äº512ï¼Œé‚£ä¹ˆè¾“å…¥å°±å˜æˆï¼ˆ4ï¼Œ512ï¼‰çš„çŸ©é˜µï¼Œä¸ºäº†æ–¹ä¾¿å™è¿°ï¼Œåé¢éƒ½ç”¨ï¼ˆ4ï¼Œ512ï¼‰æ¥å½“æˆæ¨¡å‹çš„è¾“å…¥ã€‚
positional encoding:åœ¨Qã€Kã€Vçš„è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œè¾“å…¥å•è¯çš„ä½ç½®ä¿¡æ¯ä¼šä¸¢å¤±æ‰ã€‚æ‰€ä»¥éœ€è¦é¢å¤–ç”¨ä¸€ä¸ªä½ç½®ç¼–ç æ¥è¡¨ç¤ºè¾“å…¥å•è¯çš„é¡ºåºã€‚ç¼–ç å…¬å¼å¦‚ä¸‹
$PE_{pos,2i}=sin(pos/1000^{2i/d_{model}})$
$PE_{pos,2i+1}=cos(pos/1000^{2i/d_{model}})$
å…¶ä¸­ï¼Œpos:è¡¨ç¤ºç¬¬å‡ ä¸ªå•è¯ï¼Œ2i,2i+1è¡¨ç¤ºInput Embedingç¼–ç ç»´åº¦ï¼ˆ512ï¼‰çš„å¶æ•°ä½ã€å¥‡æ•°ä½ã€‚ è®ºæ–‡ä¸­ä½œè€…ä¹Ÿè¯•è¿‡å°†positional encodingå˜æˆå¯ä»¥å­¦ä¹ çš„ï¼Œä½†æ˜¯å‘ç°æ•ˆæœå·®ä¸å¤šï¼›è€Œä¸”ä½¿ç”¨ç¡¬ä½ç½®ç¼–ç å°±ä¸ç”¨è€ƒè™‘åœ¨æ¨æ–­ç¯èŠ‚ä¸­å¥å­çš„å®é™…é•¿åº¦è¶…è¿‡è®­ç»ƒç¯èŠ‚ä¸­ä½¿ç”¨çš„ä½ç½®ç¼–ç é•¿åº¦çš„é—®é¢˜ï¼›ä¸ºä»€ä¹ˆä½¿ç”¨sinã€coså‘¢ï¼Ÿå¯ä»¥æœ‰æ•ˆçš„è€ƒè™‘å¥ä¸­å•è¯çš„ç›¸å¯¹ä½ç½®ä¿¡æ¯
å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶ï¼ˆMulti-Head Attentionï¼‰
å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶æ˜¯Transformerçš„æ ¸å¿ƒï¼Œå±äºSelf-Attentionï¼ˆè‡ªæ³¨æ„åŠ›ï¼‰ã€‚æ³¨æ„åªè¦æ˜¯å¯ä»¥æ³¨æ„åˆ°è‡ªèº«ç‰¹å¾çš„æ³¨æ„åŠ›æœºåˆ¶å°±å«Self-Attentionï¼Œå¹¶ä¸æ˜¯åªæœ‰Transformeræœ‰ã€‚ ç¤ºæ„å›¾å¦‚ä¸‹
![image.png](/Transformer in pytorch/8596800-993737ea7c1e190a.png)
Multi-Head Attentionçš„è¾“å…¥çš„Qã€Kã€Vå°±æ˜¯è¾“å…¥çš„ï¼ˆ4,512ï¼‰ç»´çŸ©é˜µï¼ŒQ=K=Vã€‚ç„¶åç”¨å…¨è¿æ¥å±‚å¯¹Qã€Kã€Våšä¸€ä¸ªå˜æ¢ï¼Œå¤šå¤´å°±æ˜¯æŒ‡çš„è¿™é‡Œå°†è¾“å…¥æ˜ å°„åˆ°å¤šä¸ªç©ºé—´ã€‚å…¬å¼æè¿°å¦‚ä¸‹ï¼š
$MultiHead(Q,K,V)=Concat(head_1, head_2,â€¦, head_n)W^o$
å…¶ä¸­ $head_i=Attention(QW^Q_i, KW^K_i, VW^V_i)$
å…¶ä¸­ $Attention(Q,K,V)=softmax(\frac{QK^T}{\sqrt{d_k}})V$
å…¶ä¸­$W^Q_i\in R^{d_{model}*d_k}, W^K_i\in R^{d_{model}*d_k}, W^V_i\in R^{d_{model}d_v}, W^o\in R^{hd_vd_{model}}$, è®ºæ–‡ä¸­h=8, $d_k=d_v=d_{model}/h=512/8=64$
$QK^T$ç§°ä¸ºæ³¨æ„åŠ›çŸ©é˜µï¼ˆattentionï¼‰,è¡¨ç¤ºä¸¤ä¸ªå¥å­ä¸­çš„ä»»æ„ä¸¤ä¸ªå•è¯çš„ç›¸å…³æ€§ã€‚æ‰€ä»¥attention maskä¸ä¸€å®šæ˜¯æ–¹é˜µã€‚
å‰å‘ä¼ æ’­æ¨¡å—
Qã€Kã€Vç»è¿‡Multi-Head Attentionæ¨¡å—å†åŠ ä¸Šä¸€ä¸ªæ®‹å·®è·³é“¾ï¼Œç»´åº¦ä¸å˜ï¼Œè¾“å…¥ç»´åº¦æ˜¯ï¼ˆ4ï¼Œ512ï¼‰ï¼Œè¾“å‡ºç»´åº¦è¿˜æ˜¯ï¼ˆ4,512ï¼‰ï¼Œåªä¸è¿‡è¾“å‡ºçš„çŸ©é˜µçš„æ¯ä¸€è¡Œå·²ç»èåˆäº†å…¶ä»–è¡Œçš„ä¿¡æ¯ï¼ˆæ ¹æ®attention maskï¼‰ã€‚ è¿™é‡Œå‰å‘ä¼ æ’­æ¨¡å—æ˜¯ä¸€ä¸ªä¸¤å±‚çš„å…¨è¿æ¥ã€‚å…¬å¼å¦‚ä¸‹ï¼š
$FFN(x)=max(0, xW_1+b_1)W_2+b_2$, å…¶ä¸­è¾“å…¥è¾“å‡ºç»´åº¦ä¸º$d_model=512$, ä¸­é—´ç»´åº¦$d_{ff}=2048$
å¸¦Maskçš„å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶
è¿™é‡Œçš„Mask Multi-head Attentionä¸æ­¥éª¤2ä¸­çš„ç¨æœ‰ä¸åŒã€‚â€œæˆ‘çˆ±ä¸­å›½â€çš„è‹±æ–‡ç¿»è¯‘ä¸ºâ€œI love chinaâ€ã€‚ åœ¨ç¿»è¯‘åˆ°â€œloveâ€çš„æ—¶å€™ï¼Œå…¶å®æˆ‘ä»¬æ˜¯ä¸çŸ¥é“â€œchinaâ€çš„è¿™ä¸ªå•è¯çš„ï¼Œæ‰€ä»¥åœ¨è®­ç»ƒçš„æ—¶å€™ï¼Œå°±éœ€è¦æ¥æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ã€‚å³ç”¨ä¸€ä¸ªmaskæ¥é®ä½åé¢ä¿¡æ¯ã€‚è¿™ä¸ªmaskåœ¨å®é™…å®ç°ä¸­æ˜¯ä¸€ä¸ªä¸‰è§’çŸ©é˜µï¼ˆä¸»å¯¹è§’çº¿åŠä¸‹æ–¹ä¸º0ï¼Œä¸Šæ–¹ä¸º-infï¼‰ï¼Œ å®šä¹‰ä¸º$attention_mask$å¤§æ¦‚å°±é•¿ä¸‹é¢è¿™ä¸ªæ ·å­ !...</p></div><footer class=entry-footer><span title='2022-09-17 00:00:00 +0000 UTC'>ä¹æœˆ 17, 2022</span>&nbsp;Â·&nbsp;7 åˆ†é’Ÿ&nbsp;Â·&nbsp;Pan</footer><a class=entry-link aria-label="post link to Transformer in pytorch" href=https://payne4handsome.github.io/posts/machine-learning/transformer-in-pytorch/></a></article><article class=post-entry><header class=entry-header><h2>æœºå™¨å­¦ä¹ åŸºç¡€ä¹‹å‚æ•°ä¼°è®¡</h2></header><div class=entry-content><p>æœºå™¨å­¦ä¹ åŸºç¡€ä¹‹å‚æ•°ä¼°è®¡ ä¸€ã€å‚æ•°ä¼°è®¡ å¯¹æ‰€è¦ç ”ç©¶çš„éšæœºå˜é‡$\xi$ï¼Œå½“å®ƒçš„æ¦‚ç‡åˆ†å¸ƒçš„ç±»å‹å·²çŸ¥ï¼Œä½†æ˜¯å‚æ•°æœªçŸ¥ï¼Œæ¯”å¦‚$\xi$æœä»æ­£å¤ªåˆ†å¸ƒ$N(\alpha, \sigma)$ã€‚ä½†æ˜¯$\alpha, \sigma$è¿™ä¸¤ä¸ªå‚æ•°æœªçŸ¥ã€‚é‚£ä¹ˆè¿™ä¹ˆç¡®å®šè¿™äº›æœªçŸ¥å‚æ•°å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡é‡‡æ ·çš„æ–¹å¼ï¼Œå¾—åˆ°ä¸€æ‰¹æ ·æœ¬æ•°æ®ï¼Œç”¨æ ·æœ¬çš„ç»Ÿè®¡é‡æ¥ä¼°è®¡æ€»ä½“çš„ç»Ÿè®¡é‡ã€‚é‚£ä¹ˆè¿™ç§æ–¹å¼å°±æ˜¯å‚æ•°ä¼°è®¡ã€‚
æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ç§ç®€å•çš„ä¼°è®¡ã€‚
çŸ©æ³•ä¼°è®¡ï¼šè®¾æ€»ä½“$\xi$çš„åˆ†å¸ƒå‡½æ•°$F(x; \theta_1,\theta_2, â€¦, \theta_l)$ä¸­$l$ä¸ªæœªçŸ¥å‚æ•°$\theta_1,\theta_2, â€¦, \theta_l$ã€‚å‡å®šæ€»ä½“$\xi$çš„$l$é˜¶åŸç‚¹ç»å¯¹çŸ©æœ‰é™ï¼Œå¹¶è®°$v_k=E(\xi^k) (k=1,2,â€¦,l)$ã€‚ç°ç”¨æ ·æœ¬çš„ké˜¶åŸç‚¹çŸ©æ¥ä½œä¸ºæ€»ä½“çš„ké˜¶çŸ©çš„ä¼°è®¡é‡$\hat{v}_k$ã€‚å³ $v_k=\hat{v}k=\frac{1}{n}\sum{i=1}^n\xi_i^k$
é‚£ä¹ˆé€šè¿‡æ ·æœ¬çš„ä¼°è®¡é‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¼°è®¡å‡ºæ€»ä½“çš„ä¸€äº›å‚æ•°ã€‚
æ¯”å¦‚å‡è®¾$\xi$æœä»ä¸€ä¸ªåˆ†å¸ƒï¼ˆä¸ç®¡ä»€ä¹ˆåˆ†å¸ƒï¼‰ï¼Œ$E(\xi)=\alpha, D(\xi)=\sigma^2$ã€‚ä½†å…¶å€¼æœªçŸ¥ï¼Œåˆ™ç”±æ ·æœ¬çš„ä¸€é˜¶çŸ©ã€äºŒé˜¶çŸ©
$\hat{v}1=\frac{1}{n}\sum{i=1}^n\xi_i=\overline{\xi}$
$\hat{v}2=\frac{1}{n}\sum{i=1}^n\xi^2_i$
æ€»ä½“çš„ä¸€é˜¶çŸ©ã€äºŒé˜¶çŸ©
$v_1=E(\xi^1)=\alpha, v_2=E(\xi^2)=D(\xi)+(E(\xi))^2=\sigma^2+\alpha^2$
ä»¤$v_1=\hat{v}_1, v_2=\hat{v}_2$, å°±å¯ä»¥è§£å‡ºå‚æ•°$\alpha, \sigma$çš„å€¼.
$\hat{\alpha}=\overline{\xi}\ \hat{\sigma^2}=\frac{1}{n}\sum_{i=1}^n\xi^2_i-(\overline{\xi}^2)=\frac{1}{n}\sum_{i=1}^n(\xi_i-\overline{\xi})^2=S^2$
äºŒã€æå¤§ä¼¼ç„¶ä¼°è®¡ï¼ˆMaximum Likelihood Estimateï¼‰ çŸ©æ³•ä¼°è®¡è¦æ±‚éšæœºå˜é‡$\xi$çš„åŸç‚¹çŸ©å­˜åœ¨ã€‚å†è€…ï¼Œæ ·æœ¬çŸ©çš„è¡¨è¾¾å¼ç”¨æ€»ä½“$\xi$çš„åˆ†å¸ƒå‡½æ•°è¡¨è¾¾å¼æ— å…³ï¼Œå› æ­¤çŸ©æ³•ä¼°è®¡æ²¡æœ‰å……åˆ†åˆ©ç”¨åˆ†å¸ƒå‡½æ•°å¯¹å‚æ•°æä¾›çš„ä¿¡æ¯ã€‚æ‰€ä»¥å¾ˆå¤šæ—¶å€™æˆ‘ä»¬é‡‡ç”¨æå¤§ä¼¼ç„¶ä¼°è®¡
ï¼ˆæå¤§ä¼¼ç„¶ä¼°è®¡ï¼‰è®¾æ€»ä½“çš„$\xi$çš„å¯†åº¦å‡½æ•°ä¸º$f(x;\theta_1, \theta_2, â€¦, \theta_l)$ï¼Œå…¶ä¸­$\theta_1, \theta_2, â€¦, \theta_l$ä¸ºæœªçŸ¥å‚æ•°ã€‚$\xi_1, \xi_2, â€¦, \xi_n$ä¸ºæ ·æœ¬ï¼Œå®ƒçš„è”åˆå¯†åº¦å‡½æ•°ä¸º$f(x_1, x_2, â€¦, x_n;\theta_1, \theta_2, â€¦, \theta_l)$ã€‚ ç§°
$L(\theta_1, \theta_2, â€¦, \theta_l)=\prod_{i=1}^nf(x_i; \theta_1, \theta_2, â€¦, \theta_l)$ä¸º$\theta_1, \theta_2, â€¦, \theta_l$çš„ä¼¼ç„¶å‡½æ•°ã€‚è‹¥æœ‰$\hat{\theta_1}, \hat{\theta_2}, â€¦, \hat{\theta_l}$ä½¿å¾—ä¸‹è¯•æˆç«‹ï¼š
$L(\hat{\theta_1}, \hat{\theta_2}, â€¦, \hat{\theta_l})=max {L(\theta_1, \theta_2, â€¦, \theta_l)}$, åˆ™ç§°$\hat{\theta_1}, \hat{\theta_2}, â€¦, \hat{\theta_l}$ä¸ºä¸ºå‚æ•°$\theta_1, \theta_2, â€¦, \theta_l$çš„æå¤§ä¼¼ç„¶ä¼°è®¡é‡...</p></div><footer class=entry-footer><span title='2022-09-04 00:00:00 +0000 UTC'>ä¹æœˆ 4, 2022</span>&nbsp;Â·&nbsp;1 åˆ†é’Ÿ&nbsp;Â·&nbsp;Pan</footer><a class=entry-link aria-label="post link to æœºå™¨å­¦ä¹ åŸºç¡€ä¹‹å‚æ•°ä¼°è®¡" href=https://payne4handsome.github.io/posts/machine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%8F%82%E6%95%B0%E4%BC%B0%E8%AE%A1/></a></article><article class=post-entry><header class=entry-header><h2>æœºå™¨å­¦ä¹ åŸºç¡€ä¹‹åå‘ä¼ æ’­</h2></header><div class=entry-content><p>æœºå™¨å­¦ä¹ åŸºç¡€äºŒ-åå‘ä¼ æ’­ ç¥ç»ç½‘ç»œä¹‹æ‰€ä»¥å¯ä»¥è®­ç»ƒï¼Œå¾—ç›Šäºä¸Hintonåœ¨1986å¹´æå‡ºçš„åå‘ä¼ æ’­ç®—æ³•ã€‚åå‘ä¼ æ’­èƒŒåçš„æ•°å­¦åŸç†å°±æ˜¯é“¾å¼æ³•åˆ™ã€‚æœ¬æ–‡ä¼šå…·ä½“çš„å®ä¾‹æ¥æ¼”ç¤ºåå‘ä¼ æ’­å…·ä½“çš„è®¡ç®—è¿‡ç¨‹ï¼Œè®©å¤§å®¶æœ‰ä¸€ä¸ªå®é™…çš„å°è±¡ã€‚æ–‡ä¸­å…¬å¼éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦æ•²å‡ºæ¥çš„ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚æ–‡ä¸­å‚è€ƒäº†å…¶ä»–ä½œè€…çš„ä¸€äº›ä¾‹å­å’Œæ•°æ®ï¼Œå‡åœ¨å‚è€ƒæ–‡çŒ®ä¸­åˆ—å‡ºã€‚ ä¸€ä¸ªç®€å•çš„ä¸¤å±‚ç¥ç»ç½‘ç»œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚å…¶ä¸­
$i_1, i_2$ : è®­ç»ƒæ—¶å€™å®é™…çš„è¾“å…¥
$o_1, o_2$ : è®­ç»ƒæ—¶å€™å®é™…çš„è¾“å‡ºï¼ˆground truthï¼‰
$out_{o1}, out_{o2}$: æ¨¡å‹é¢„æµ‹çš„ç»“æœ
æˆ‘ä»¬çš„ç›®çš„å°±æ˜¯é€šè¿‡åå‘ä¼ æ’­ï¼Œæ›´æ–°æ¨¡å‹çš„å‚æ•°$w_i,b_i$, ä½¿å¾—$out_{o1}, out_{o2}$å°½å¯èƒ½çš„é€¼è¿‘$o_1, o_2$ã€‚
æœ¬ä¾‹ä¸­æ¿€æ´»å‡½æ•°ç”¨$sigmod(x)=\frac{1}{1+e^{-x}}$;
æŸå¤±å‡½æ•°ç”¨$L_2=\frac{1}{2}*(target-output)^2$
å‰å‘ä¼ æ’­ éšè—å±‚è®¡ç®— $net_{h1}=w_1i_1+w_2i_2+b_1\=0.150.05+0.20.1+0.35=0.3775$
$out_{h1}=sigmod(net_{h1})=\frac{1}{1+e^{-0.3775}}=0.593269992$
åŒç† $out_{h2}=0.596884378$
è¾“å‡ºå±‚è®¡ç®— $net_{o1}=w_5out_{h1}+w_6out_{h2}+b_2\=0.40.593269992+0.450.596884378=1.105905967$
$out_{o1}=sigmod(net_{o1})=0.75136507$
åŒç† $out_{o2}=0.772928465$
æœ€ç»ˆæˆ‘ä»¬çœ‹åˆ°å‰å‘ä¼ æ’­çš„ç»“æœä¸ºï¼ˆ0.75136507ï¼Œ0.772928465ï¼‰ä¸æˆ‘ä»¬çš„ç›®æ ‡ï¼ˆ0.01,0.99ï¼‰å·®çš„æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥æ¥ä¸‹æ¥ç”¨åå‘ä¼ æ’­ç®—æ³•å­¦ä¹ 
åå‘ä¼ æ’­ è¦æƒ³åå‘ä¼ æ’­ï¼Œè¿˜éœ€è¦ä¸¤æ­¥ï¼ˆ1ï¼‰è®¡ç®—æŸå¤±ï¼Œï¼ˆ2ï¼‰è®¡ç®—æ¢¯åº¦ã€‚è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º æ€»çš„æŸå¤±$E_{total}=E_{o1}+E_{o2}$,å…¶ä¸­
$E_{o1}=\frac{1}{2}(target_{o1}-out_{o1})^2=\frac{1}{2}(0.01-0.75136507)^2=0.274811083\ E_{o2}=\frac{1}{2}(target_{o2}-out_{o2})^2=0.023560026\ E_{total}=E_{o1}+E_{o2}=0.274811083+0.023560026=0.298371109 $
è®¡ç®—å‚æ•°$w_5$çš„æ¢¯åº¦ æ ¹æ®é“¾å¼æ³•åˆ™ï¼Œå…¬å¼å¦‚ä¸‹ï¼š $\frac{\partial E_{total}}{\partial w_5}=\frac{\partial E_{total}}{\partial out_{o1}}\frac{\partial out_{o1}}{\partial net_{o1}}\frac{\partial net_{o1}}{\partial w_5}$
$\frac{\partial E_{total}}{\partial out_{o1}}=(target_{o1}-out_{o1})*-1=-(0.01-0.75136507)=0.74136507$
$\frac{\partial out_{o1}}{\partial net_{o1}}=out_{o1}*(1-out_{o1})=0.75136507(1-0.75136507)=0.186815602$
$\frac{\partial net_{o1}}{\partial out_{w_5}}=out_{h1}=0.593269992$
æ‰€ä»¥$\frac{\partial E_{total}}{\partial w_5}=0.741365070.1868156020.593269992=0.082167041$
åœ¨è®¡ç®—åé¢å‚æ•°çš„æ¢¯åº¦æ—¶ï¼Œéƒ½ä¼šéœ€è¦ç”¨åˆ°$\frac{\partial E_{total}}{\partial net_{o1}}, \frac{\partial E_{total}}{\partial net_{o2}}$çš„å€¼ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªç§°ä¸ºè¾“å‡ºå±‚çš„è¯¯å·®, ç¬¦å·è®°ä¸ºï¼š...</p></div><footer class=entry-footer><span title='2022-09-04 00:00:00 +0000 UTC'>ä¹æœˆ 4, 2022</span>&nbsp;Â·&nbsp;2 åˆ†é’Ÿ&nbsp;Â·&nbsp;Pan</footer><a class=entry-link aria-label="post link to æœºå™¨å­¦ä¹ åŸºç¡€ä¹‹åå‘ä¼ æ’­" href=https://payne4handsome.github.io/posts/machine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://payne4handsome.github.io/page/2/>Â«&nbsp;ä¸Šä¸€é¡µ&nbsp;</a>
<a class=next href=https://payne4handsome.github.io/page/4/>ä¸‹ä¸€é¡µ&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span>&copy; 2023 <a href=https://payne4handsome.github.io>Pan'Log</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>