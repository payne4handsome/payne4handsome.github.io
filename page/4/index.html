<!doctype html><html lang=zh dir=auto><head><meta name=generator content="Hugo 0.112.0-DEV"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Pan'Log</title><meta name=description content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"><meta name=author content="Pan"><link rel=canonical href=https://payne4handsome.github.io/><link crossorigin=anonymous href=/assets/css/stylesheet.541955f499cd4d76b0863a0426411d26c7eb9a4b1c5a15e91740b02838d41e68.css integrity="sha256-VBlV9JnNTXawhjoEJkEdJsfrmkscWhXpF0CwKDjUHmg=" rel="preload stylesheet" as=style><link rel=icon href=https://payne4handsome.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://payne4handsome.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://payne4handsome.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://payne4handsome.github.io/apple-touch-icon.png><link rel=mask-icon href=https://payne4handsome.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/json href=https://payne4handsome.github.io/index.json><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Pan'Log"><meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"><meta property="og:type" content="website"><meta property="og:url" content="https://payne4handsome.github.io/"><meta property="og:image" content="https://payne4handsome.github.io/papermod-cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://payne4handsome.github.io/papermod-cover.png"><meta name=twitter:title content="Pan'Log"><meta name=twitter:description content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Pan'Log","url":"https://payne4handsome.github.io","description":"Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod","thumbnailUrl":"https://payne4handsome.github.io/favicon.ico","sameAs":[]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class="header intro-header" style=background-image:url(cover001.jpg)><nav class=nav><div class=logo><a href=https://payne4handsome.github.io accesskey=h title="Pan'Log (Alt + H)">Pan'Log</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://payne4handsome.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://payne4handsome.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://payne4handsome.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://payne4handsome.github.io/archives title=Archive><span>Archive</span></a></li></ul></nav><article class="first-entry1 home-info"><header class=entry-header><h1>Pan&rsquo;Blog</h1></header><div class=entry-content><p>Welcome to pan&rsquo;s blog.</p><ul><li>Hi, this is <strong>Zhang Pan</strong>. Iâ€™m documenting my learning notes in this blog</li><li>Do give a ğŸŒŸ on Github !</li></ul></div><footer class=entry-footer><div class=social-icons></div></footer></article></header><main class=main><article class=post-entry><header class=entry-header><h2>å…³äºå˜æ¢</h2></header><div class=entry-content><p>åšå›¾åƒå¤„ç†æˆ–è€…æ•°æ®å¢å¼ºçš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸éœ€è¦ç”¨å¾—å„ç§å˜æ¢æ¥å¤„ç†å›¾ç‰‡ã€‚æœ¬æ–‡è¯¦ç»†çš„è¯´æ˜äº†çº¿æ€§å˜æ¢ã€ä»¿å°„å˜æ¢ã€é€è§†å˜æ¢çš„å®šä¹‰ã€å‡ ä½•æ„ä¹‰ã€å­¦ä¹ è¡¨è¾¾ã€‚é‡ç‚¹ç»™å‡ºé€è§†å˜æ¢çš„è®¡ç®—è¿‡ç¨‹ï¼Œå¹¶ç»™å‡ºpythonå®ç°ä»£ç ã€‚ç»éªŒè¯å’Œopencvçš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚ è™½ç„¶opencvæˆ–è€…å…¶ä»–çš„åº“æœ‰ç°æˆçš„å‡½æ•°å¯ä¾›è°ƒç”¨ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯éœ€è¦æ˜ç™½è¿™äº›å‡½æ•°è¾“å‡ºçš„æ„ä¹‰ã€‚æ¯”å¦‚opencvçš„getAffineTransformè¿”å›ä¸€ä¸ª2*3çš„çŸ©é˜µï¼Œè¿™ä¸ª2*3çŸ©é˜µçš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ çº¿æ€§å˜æ¢æ˜¯ä»¿å°„å˜æ¢çš„ç‰¹ä¾‹ï¼Œä»¿å°„å˜æ¢æ˜¯é€è§†å˜æ¢çš„ç‰¹ä¾‹
ä¸€ã€çº¿æ€§å˜æ¢ 1.1çº¿æ€§å˜æ¢çš„å®šä¹‰ å¦‚æœ$f: V->W$æ»¡è¶³å¦‚ä¸‹ä¸¤æ¡æ€§è´¨ï¼Œé‚£ä¹ˆ$f$å°±æ˜¯çº¿æ€§å˜æ¢
å¯åŠ æ€§ï¼ˆadditivityï¼‰ï¼š$f(x+y) = f(x)+f(y)$ é½æ¬¡æ€§ï¼ˆhomogeneityï¼‰ï¼š$f(ax) = af(x)$ å½“ç„¶ä¹Ÿå¯ä»¥æŠŠè¿™ä¸¤ä¸ªæ€§è´¨åˆå¹¶ä¸€ä¸‹, å¯¹ä»»æ„çš„$a$ä¸‹å¼æ€»æˆç«‹ï¼š $f(x+ay)=f(x)+af(y)$ é‚£ä¹ˆæ€è€ƒä¸€ä¸‹ä¸‹é¢ä¸¤ä¸ªå˜æ¢æ˜¯ä¸æ˜¯çº¿æ€§å˜æ¢ ï¼ˆ1ï¼‰$f(x,y) = x+2y$ ï¼ˆ2ï¼‰$f(x,y) = x+1$ ç¬¬ä¸€å¼å­æ˜¯çº¿æ€§å˜æ¢ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªå¼å­æ˜¯ä¸æ»¡è¶³é½æ¬¡æ€§çš„ã€‚å› ä¸º$f(ax)=ax+1 â‰  a(x+1)$ ä»é½æ¬¡æ€§å¯ä»¥çœ‹å‡ºï¼Œçº¿æ€§å˜æ¢ä¸€å®šæ˜¯è¿‡é›¶ç‚¹çš„
1.2çº¿æ€§å˜æ¢çš„å‡ ä½•æ„ä¹‰ æ»¡è¶³å¦‚ä¸‹å‡ ä½•æ€§è´¨
å˜æ¢å‰æ˜¯ç›´çº¿çš„ï¼Œå˜æ¢åä¾ç„¶æ˜¯ç›´çº¿ ç›´çº¿æ¯”ä¾‹ä¿æŒä¸å˜ å˜æ¢å‰æ˜¯åŸç‚¹çš„ï¼Œå˜æ¢åä¾ç„¶æ˜¯åŸç‚¹ äºŒã€ä»¿å°„å˜æ¢ 2.1 ä»¿å°„å˜æ¢çš„å‡ ä½•æ„ä¹‰ ä»¿å°„å˜æ¢ä»å‡ ä½•æ„ä¹‰çœ‹ä¸éœ€è¦æ»¡è¶³çº¿æ€§å˜æ¢çš„ç¬¬ä¸‰ç‚¹ï¼Œå³ä»¿å°„å˜æ¢æ»¡è¶³å¦‚ä¸‹ä¸¤ç‚¹å³å¯
å˜æ¢å‰æ˜¯ç›´çº¿çš„ï¼Œå˜æ¢åä¾ç„¶æ˜¯ç›´çº¿ ç›´çº¿æ¯”ä¾‹ä¿æŒä¸å˜ ä¸‰ã€å¸¸è§çš„å˜æ¢ ï¼ˆIdentityï¼‰æ’ç­‰å˜æ¢ ï¼ˆTranslationï¼‰å¹³ç§»å˜æ¢ ï¼ˆRotationï¼‰æ—‹è½¬å˜æ¢ ï¼ˆScalingï¼‰å°ºåº¦å˜æ¢ ï¼ˆReflectionï¼‰åå°„å˜æ¢ ï¼ˆShearï¼‰é”™åˆ‡ ç¤ºæ„å›¾å¦‚ä¸‹ å›¾ç‰‡from ä»¿å°„å˜æ¢åŠå…¶å˜æ¢çŸ©é˜µçš„ç†è§£ åœ¨ä¸Šé¢æ‰€æœ‰çš„å˜æ¢ä¸­åªæœ‰å¹³ç§»å˜æ¢ä¸æ˜¯çº¿æ€§å˜æ¢ï¼ˆä¸æ»¡è¶³é½æ¬¡æ€§ï¼‰ï¼Œå…¶ä»–çš„éƒ½æ˜¯çº¿æ€§å˜æ¢ æ‰€ä»¥ä»¿å°„å˜æ¢å°±æ˜¯çº¿æ€§å˜æ¢+å¹³ç§» å››ã€ä»¿å°„å˜æ¢å’Œçº¿æ€§å˜æ¢çš„æ•°å­¦è¡¨è¾¾ $Y = AX+b$ å…¶ä¸­Aæ˜¯ä¸€ä¸ªm*nçš„çŸ©é˜µï¼Œbæ˜¯ä¸€ä¸ªnç»´çš„å‘é‡ã€‚ å…¶ä¸­ Aè¡¨ç¤ºçº¿æ€§å˜æ¢ï¼Œbè¡¨ç¤ºå¹³ç§» ã€‚A,båˆåœ¨ä¸€èµ·å°±å¯ä»¥è¡¨ç¤ºä¸€ä¸ªä»¿å°„å˜æ¢ ä¸Šå¼å¯ä»¥å†™å¦‚ä¸‹ä¸¤ä¸ªå½¢å¼ï¼Œç”¨çŸ©é˜µçš„æ–¹å¼æ–¹ä¾¿è®¡ç®— 1ã€
$$Y = [A|b]*\left[\begin{matrix}X\\1 \end{matrix}\right]$$
2ã€ $$ \left[\begin{matrix}Y\\1 \end{matrix}\right] = \left[\begin{matrix}A & b \\0 & 1 \end{matrix}\right] * \left[\begin{matrix}X\\1 \end{matrix}\right] $$...</p></div><footer class=entry-footer><span title='2021-11-29 21:28:47 +0800 CST'>åä¸€æœˆ 29, 2021</span>&nbsp;Â·&nbsp;2 åˆ†é’Ÿ&nbsp;Â·&nbsp;pan</footer><a class=entry-link aria-label="post link to å…³äºå˜æ¢" href=https://payne4handsome.github.io/posts/basic/%E5%9F%BA%E7%A1%80%E6%95%B0%E5%AD%A6/%E5%85%B3%E4%BA%8E%E5%8F%98%E6%8D%A2/></a></article><article class=post-entry><header class=entry-header><h2>æ¢¯åº¦ä¸‹é™ä¼˜åŒ–æ–¹æ³•æ¦‚è¿°</h2></header><div class=entry-content><p>Updated on 2023-06-24: add AdamW
æ¢¯åº¦ä¸‹é™æ˜¯ä¼˜åŒ–ç¥ç»ç½‘ç»œå’Œæœºå™¨æœºå™¨å­¦ä¹ ç®—æ³•çš„é¦–é€‰ä¼˜åŒ–æ–¹æ³•ã€‚æœ¬æ–‡é‡åº¦å‚è€ƒSEBASTIAN RUDERçš„æ–‡ç« ã€‚å¯¹äºè‹±æ–‡æ¯”è¾ƒå¥½çš„åŒå­¦è¯·ç›´æ¥é˜…è¯»åŸæ–‡ã€‚æœ¬æ–‡åªä¸ºä¸ªäººçš„å­¦ä¹ æ€»ç»“ï¼Œéš¾å…æœ‰æ‰€æ¬ ç¼ºå’Œä¸è¶³ã€‚
ä¸€ã€æ¢¯åº¦ä¸‹é™å˜ç§ æ ¹æ®è®­ç»ƒæ•°æ®é›†çš„å¤§å°ï¼Œæ¢¯åº¦ä¸‹é™æœ‰ä¸‰ç§å˜ä½“ï¼Œä½†æ˜¯æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œä¸ä¸€æ ·çš„æ˜¯æ¯æ¬¡ä½¿ç”¨å¤šå°‘æ¡æ ·æœ¬ã€‚å¦‚æœå†…å­˜ä¸€æ¬¡å¯ä»¥è®¡ç®—æ‰€æœ‰æ ·æœ¬çš„æ¢¯åº¦ï¼Œç§°ä¸ºï¼šæ‰¹æ¢¯åº¦ä¸‹é™ï¼ˆBatch gradient descentï¼‰ï¼›å¦‚æœå†…å­˜ä¸€æ¬¡åªå…è®¸ä¸€ä¸ªæ ·æœ¬ï¼Œç§°ä¸ºï¼šéšæœºæ¢¯åº¦ä¸‹é™ï¼ˆStochastic gradient descentï¼‰ï¼›å¤§éƒ¨åˆ†æ—¶å€™ï¼Œå†…å­˜ä¸€æ¬¡æ˜¯å¯ä»¥è®¡ç®—éƒ¨åˆ†æ ·æœ¬çš„ï¼Œç§°ä¸ºï¼šæœ€å°æ‰¹æ¢¯åº¦ä¸‹é™ï¼ˆMini-batch gradient descentï¼‰ã€‚ä¸‰ç§å˜ä½“çš„æ•°æ®è¡¨è¾¾å¦‚ä¸‹ï¼š
1.1æ‰¹æ¢¯åº¦ä¸‹é™(Vanilla gradient descent,åˆç§°Batch gradient descent) $\theta = \theta - \eta \cdot \nabla_\theta J( \theta)$
1.2éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆStochastic gradient descentï¼‰ $\theta = \theta - \eta \cdot \nabla_\theta J( \theta; x^{(i)}; y^{(i)})$
1.3æœ€å°æ‰¹æ¢¯åº¦ä¸‹é™ï¼ˆMini-batch gradient descentï¼‰ $\theta = \theta - \eta \cdot \nabla_\theta J( \theta; x^{(i:i+n)}; y^{(i:i+n)})$
æ³¨æ„ï¼Œåœ¨å…¶ä»–åœ°æ–¹å¹¶æ²¡å¯¹ä¸Šè¿°ä¸‰ç§å˜ä½“åšä¸¥æ ¼åŒºåˆ«ï¼Œç»Ÿç§°ä¸ºSGDï¼ˆéšæœºæ¢¯åº¦ä¸‹é™ï¼‰ï¼Œä¸‹æ–‡å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¹Ÿä¸åŠ åŒºåˆ†ï¼Œç»Ÿç§°ä¸ºSGD
äºŒã€æ¢¯åº¦ä¸‹é™çš„å‡ ç§ä¼˜åŒ–æ–¹æ³• ä¼ ç»Ÿçš„æ¢¯åº¦ä¸‹é™æ³•ä¸èƒ½ä¿è¯ä¸€ä¸ªå¾ˆå¥½çš„æ”¶æ•›ï¼Œè€Œä¸”æœ‰ä¸€äº›æŒ‘æˆ˜éœ€è¦è¢«è§£å†³ã€‚
é€‰æ‹©è¿™ä¸ªåˆé€‚çš„å­¦ä¹ ç‡æ˜¯æ¯”è¾ƒå›°éš¾çš„ã€‚ç‰¹åˆ«æ˜¯å¯¹ä¸€ä¸ªæ–°çš„æ¨¡å‹å’Œæ–°æ•°æ®é›†æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯ä¸çŸ¥é“é€‰æ‹©ä»€ä¹ˆæ ·çš„å­¦ä¹ ç‡æ˜¯åˆé€‚çš„ã€‚åªèƒ½ä¸æ–­çš„å»å°è¯•ã€‚ å­¦ä¹ ç‡è°ƒåº¦ç®—æ³•å¯ä»¥åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­å»è°ƒæ•´æ¨¡å‹çš„å­¦ä¹ ç‡ã€‚æ¨¡å‹ä¸€å¼€å§‹çš„æ—¶å€™å¯ä»¥ä½¿ç”¨å¤§ä¸€ç‚¹çš„å­¦ä¹ ç‡ï¼Œåé¢å†ä½¿ç”¨å°ä¸€ç‚¹çš„å­¦ä¹ ç‡å»å¾®è°ƒæ¨¡å‹ã€‚æ›´å¥½çš„æ–¹æ³•æ˜¯ä¸€å¼€å§‹ä¹Ÿç”¨ä¸€ä¸ªå°çš„å­¦ä¹ ç‡å»warm-upè®­ç»ƒï¼Œè®©å‚æ•°å…ˆé€‚åº”æ•°æ®é›†ã€‚ä½†æ˜¯æ— è®ºå“ªç§å­¦ä¹ ç‡è°ƒåº¦ç®—æ³•éƒ½éœ€è¦é¢„å…ˆå®šä¹‰è°ƒåº¦ç®—æ³•ï¼Œè¿™ç§æ–¹æ³•ä¹Ÿæ˜¯æ²¡æœ‰åŠæ³•å¾ˆå¥½çš„é€‚åº”æ¨¡å‹çš„ç‰¹å¾çš„ã€ å¯¹æ¯ä¸€ä¸ªå‚æ•°éƒ½ä½¿ç”¨åŒæ ·çš„å­¦ä¹ ç‡æ˜¯ä¸åˆé€‚çš„ã€‚å¯¹äºç¨€ç–çš„æ•°æ®æˆ–è€…ç‰¹å¾éå¸¸ä¸å‡è¡¡çš„æ•°æ®ã€‚æœ€å¥½æ˜¯ä½¿ç”¨ä¸åŒå­¦ä¹ ç‡å­¦ä¹ ä¸åŒé¢‘ç‡çš„ç‰¹å¾ã€‚ å¦å¤–çš„æŒ‘æˆ˜æ˜¯å¯¹äºé«˜é˜¶éå‡¸çš„æŸå¤±å‡½æ•°ï¼Œå¾€å¾€ä¼šé™·äºå±€éƒ¨æå€¼ç‚¹ã€‚è¿˜æœ‰ä¸€ç§éç‚¹çš„æƒ…å†µï¼Œæ¨¡å‹ä¹Ÿæ˜¯å¾ˆéš¾å­¦ä¹ çš„ã€‚æ­¤æ—¶æŸå¤±å‡½æ•°åœ¨å„ä¸ªæ–¹å‘çš„æ¢¯åº¦æ¥è¿‘äº0ã€‚SGDæ˜¯å¾ˆéš¾é€ƒè„±ä¸éç‚¹æˆ–è€…å±€éƒ¨æå€¼ç‚¹çš„ã€‚ é’ˆå¯¹ä¸Šé¢çš„ä¸€äº›é—®é¢˜ï¼Œæ…¢æ…¢å‡ºç°äº†ä¸€äº›é’ˆå¯¹æ¢¯åº¦ä¸‹é™çš„ä¼˜åŒ–æ–¹æ³•ã€‚ åœ¨ä»‹ç»SGDå˜ç§ä¹‹å‰ã€‚å…ˆç»™å‡ºå„ä¸ªå˜ç§çš„ä¸€èˆ¬èŒƒå¼ã€‚åå¤©çš„å„ä¸ªå˜ç§ä¼˜åŒ–æ–¹æ³•éƒ½ç¦»ä¸å¼€è¿™ä¸ªèŒƒå¼ã€‚
(1)è®¡ç®—ç›®æ ‡å‡½æ•°å…³äºå‚æ•°çš„æ¢¯åº¦
$g_t = \nabla_\theta J( \theta)$...</p></div><footer class=entry-footer><span title='2021-11-28 00:00:00 +0000 UTC'>åä¸€æœˆ 28, 2021</span>&nbsp;Â·&nbsp;1 åˆ†é’Ÿ&nbsp;Â·&nbsp;Pan</footer><a class=entry-link aria-label="post link to æ¢¯åº¦ä¸‹é™ä¼˜åŒ–æ–¹æ³•æ¦‚è¿°" href=https://payne4handsome.github.io/posts/machine-learning/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D%E4%BC%98%E5%8C%96%E6%96%B9%E6%B3%95%E6%A6%82%E8%BF%B0/></a></article><article class=post-entry><header class=entry-header><h2>pytorch ddp</h2></header><div class=entry-content><p>(1) å…³é”®æ¦‚å¿µ
world_size: é›†ç¾¤ä¸­æ‰€æœ‰GPUçš„æ•°é‡ rank: èŒƒå›´[0, world_size-1], è¡¨ç¤ºGPUçš„ç¼–å· local_rank: GPUåœ¨æ¯å°æœºå™¨ä¸Šçš„ç¼–å· æ¯”å¦‚ï¼Œä¸¤å°æœºå™¨ï¼Œæ¯å°æœºå™¨4å—å¡ï¼Œé‚£ä¹ˆworld_size= 2*4, rank å–å€¼èŒƒå›´ [0,1,2,3,4,5,6,7]ï¼Œ local_rank å–å€¼èŒƒå›´[0,1,2,3] (2) torch.distributed.launch å¯åŠ¨é›†ç¾¤å‚æ•°
â€“nnodes: ä¸€å…±å¤šå°‘å°æœºå™¨ â€“node_rank: å½“å‰æœºå™¨ç¼–å· â€“nproc_per_node: æ¯å°æœºå™¨å¤šå°‘ä¸ªè¿›ç¨‹ â€“master_adderss: masterèŠ‚ç‚¹ipåœ°å€ â€“master_port: masterèŠ‚ç‚¹ç«¯å£ masterèŠ‚ç‚¹çš„node_rankå¿…é¡»ä¸º0 command example:
python -m torch.distributed.launch --nnodes=2 --node_rank=0 --nproc_per_node 8 \ --master_adderss $my_address --master_port $my_port main.py (3) mp.spwan å¯åŠ¨ PyTorchå¼•å…¥äº†torch.multiprocessing.spawnï¼Œå¯ä»¥ä½¿å¾—å•å¡ã€DDPä¸‹çš„å¤–éƒ¨è°ƒç”¨ä¸€è‡´ï¼Œå³ä¸ç”¨ä½¿ç”¨torch.distributed.launchã€‚ python xxxx.pyä¸€å¥è¯æå®šDDPæ¨¡å¼ã€‚ def demo_fn(rank, world_size): dist.init_process_group("nccl", rank=rank, world_size=world_size) # lots of code. ... def run_demo(demo_fn, world_size): mp.spawn(demo_fn, args=(world_size,), nprocs=world_size, join=True) (4) é›†ç¾¤è®­ç»ƒæ­¥éª¤ import torch....</p></div><footer class=entry-footer><span title='2021-09-15 00:00:00 +0000 UTC'>ä¹æœˆ 15, 2021</span>&nbsp;Â·&nbsp;2 åˆ†é’Ÿ&nbsp;Â·&nbsp;Pan</footer><a class=entry-link aria-label="post link to pytorch ddp" href=https://payne4handsome.github.io/posts/machine-learning/pytorch-ddp/></a></article><article class=post-entry><header class=entry-header><h2></h2></header><div class=entry-content><p>$$\frac{dq}{dt}(t)=f_\theta(t, q(t),G(t), \Omega(t), E)$$
$q(t)$
$\Omega(t)$
$G(t)$
$E$
$\theta$</p></div><footer class=entry-footer>1 åˆ†é’Ÿ&nbsp;Â·&nbsp;Pan</footer><a class=entry-link aria-label="post link to " href=https://payne4handsome.github.io/posts/papers/nsp-sfm/></a></article><article class=post-entry><header class=entry-header><h2>CompleableFutureåŸç†å’Œæºç åˆ†æ</h2></header><div class=entry-content><p>CompleableFuture ä½¿ç”¨åœºæ™¯ CompletableFutureçš„å®šä¹‰å¦‚ä¸‹ï¼š
public class CompletableFuture&lt;T> implements Future&lt;T>, CompletionStage&lt;T> æˆ‘ä»¬çœ‹åˆ°CompletableFutureæ˜¯å®ç°äº†Futureçš„æ¥å£çš„ï¼Œåœ¨æ²¡æœ‰CompletableFutureä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨FutureTaskæ¥å®ç°ä¸€ä¸ªFutureçš„åŠŸèƒ½ã€‚é‚£ä¹ˆæœ‰äº†FutureTaské‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜è¦æœ‰CompletableFutureå‘¢ï¼Ÿ æˆ‘ä»»åŠ¡ä¸»è¦æ˜¯CompletableFutureæœ‰ä¸¤ä¸ªä¼˜ç‚¹
CompletableFutureå¯ä»¥å®ç°å®Œå…¨çš„å¼‚æ­¥ï¼Œè€ŒFutureTaskå¿…é¡»é€šè¿‡geté˜»å¡çš„æ–¹å¼è·å–ç»“æœ CompletableFuture .supplyAsync(()-> 1+2) .thenAccept((v)-> System.out.println(v*v)); å¦‚ä¸Šé¢çš„ä»£ç æ‰€ç¤ºï¼Œæˆ‘ä»¬å®Œæ•´çš„ä»»åŠ¡æœ‰ä¸¤ä¸ªé˜¶æ®µï¼Œä¸€é˜¶æ®µæ˜¯è®¡ç®—1+2ï¼ŒäºŒé˜¶æ®µæ˜¯è®¡ç®—ä¸€é˜¶æ®µè¿”å›ç»“æœçš„å¹³æ–¹ï¼Œåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸»çº¿ç¨‹å®Œå…¨ä¸éœ€è¦ç®¡è¿™ä¸ªä»»åŠ¡çš„æ‰§è¡Œæƒ…å†µï¼Œä¹Ÿä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚ä½†æ˜¯å¦‚æœç”¨FutureTaskå®ç°å¦‚ä¸ŠåŠŸèƒ½å¦‚ä¸‹ï¼š
FutureTask&lt;Integer> futureTask1 = new FutureTask&lt;Integer>(() -> { return 1 + 2; }); new Thread(futureTask1).start(); Integer periodOneResult = futureTask1.get(); FutureTask&lt;Integer> futureTask2 = new FutureTask&lt;Integer>(() -> { return periodOneResult * periodOneResult; }); new Thread(futureTask2).start(); Integer secondOneResult = futureTask2.get(); System.out.println(secondOneResult); ä»£ç å†—é•¿ä¸è¯´ï¼Œè¿˜éœ€è¦getæ–¹æ³•é˜»å¡ä¸»çº¿ç¨‹å»è·å–ç»“æœã€‚ä»¥ä¸Šä»£ç åªæ˜¯è¯´æ˜CompletableFutureçš„å¼‚æ­¥ä¼˜ç‚¹ï¼Œå®é™…å·¥ä½œä¸­ä½ å¯ä»¥æŠŠä¸¤ä¸ªä»»åŠ¡çœ‹å‡ºä¸¤ä¸ªapi
CompletableFutureå¯ä»¥å®ç°å¤æ‚çš„ä»»åŠ¡ç¼–æ’ï¼Œè¯·æ€è€ƒä¸‹é¢ä»£ç çš„æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ CompletableFuture&lt;String> base = new CompletableFuture&lt;>(); CompletableFuture&lt;String> completion0 = base.thenApply(s -> { System.out.println("completion 0"); return s + " 0"; }); CompletableFuture&lt;String> completion1 = base....</p></div><footer class=entry-footer>4 åˆ†é’Ÿ&nbsp;Â·&nbsp;pan</footer><a class=entry-link aria-label="post link to CompleableFutureåŸç†å’Œæºç åˆ†æ" href=https://payne4handsome.github.io/posts/java/java-%E5%B9%B6%E5%8F%91%E4%B8%93%E9%A2%98/compleablefuture%E5%8E%9F%E7%90%86%E5%92%8C%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://payne4handsome.github.io/page/3/>Â«&nbsp;ä¸Šä¸€é¡µ&nbsp;</a>
<a class=next href=https://payne4handsome.github.io/page/5/>ä¸‹ä¸€é¡µ&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span>&copy; 2023 <a href=https://payne4handsome.github.io>Pan'Log</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>